<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="board">

    <select id="selectBoardList" resultType="board">  /*파라미터값 = rowbounds 는 mybatis에서 알아서 사용*/
        SELECT * FROM BOARD
    </select>

    <select id="countBoardList" resultType="_int"> /*  _int 는 mabatis에서 사용하는 별칭이라 사용하는게 맞다.*/
        SELECT COUNT(*) FROM BOARD
    </select>

   <insert id="insertBoardList" parameterType="board">
        INSERT INTO BOARD VALUES (SEQ_BOARD.NEXTVAL,#{boardTitle}
                                  ,#{boardWriter},#{boardContent}
                                ,default,default)

        <selectKey keyProperty="boardNo" resultType="Long" order="AFTER">
            SELECT SEQ_BOARDNO.CURRVAL FROM DUAL
        </selectKey>
    </insert>

    <insert id="insertAttachment" parameterType="attachment">
        INSERT INTO ATTACHMENT VALUES (SEQ_ATTACHEMENTNO.NEXTVAL,#{boardNo},
                                       #{originalFileName}, #{renamedFileName}
                                      ,default,default,default)

    </insert>
</mapper>